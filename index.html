<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="js/tmi.min.js"></script>
    <script src="js/purify.min.js"></script>
    <link rel="stylesheet" href="configs/config.css">
    <script type="module">
      import Config from "./configs/config.js";
      const urlParams = new URLSearchParams(window.location.search);
      const conf = new Config(urlParams.get('users'), urlParams.get('max'), document.querySelector('#chat'));
      const client = new tmi.Client({ connection: { secure: true, reconnect: true }, channels: conf.getUsers() });
      client.connect();
      client.on('message', (channel, tags, message, self) => {
        conf.logicMessage(tags.username, message);
      });
    </script>
  </head>
  <body>
    <div id="chat">Waiting on messages!</div>
  </body>
</html>
